{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from \"react\";\nconst useRequest = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // const request = async (url) => {\n  //     setLoading(true)\n  //     const response = await fetch(url, {method: 'GET', headers: {'Content-type': 'application/json'}})\n\n  //     if (!response.ok) {\n  //         setError(true)\n  //         throw new Error (`Something go wrong, status - ${response.status}`)\n  //     }\n\n  //     setLoading(false)\n\n  //     return response.json()\n  // }\n\n  const request = useCallback(async function (url) {\n    let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n    let body = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n      'Content-type': 'application/json'\n    };\n    setLoading(true);\n    try {\n      const response = await fetch(url, {\n        method,\n        headers,\n        body\n      });\n      if (!response.ok) {\n        throw new Error(`Something go wrong, status - ${response.status}`);\n      }\n      return response.json();\n    } catch (e) {\n      setError(e.message);\n      throw e;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const clearError = useCallback(() => setError(null), []);\n  return {\n    request,\n    loading,\n    error,\n    clearError\n  };\n};\n_s(useRequest, \"wBqGcGl6EafFNGt940fH8x5vtvA=\");\nexport default useRequest;","map":{"version":3,"names":["useState","useCallback","useRequest","loading","setLoading","error","setError","request","url","method","body","headers","response","fetch","ok","Error","status","json","e","message","clearError"],"sources":["/Users/artem/Desktop/Web_development/React/marvel_starter-2/src/services/useRequest.js"],"sourcesContent":["import { useState, useCallback } from \"react\"\n\nconst useRequest = () => {\n    const [loading, setLoading] = useState(false)\n    const [error, setError] = useState(null)\n\n    // const request = async (url) => {\n    //     setLoading(true)\n    //     const response = await fetch(url, {method: 'GET', headers: {'Content-type': 'application/json'}})\n\n    //     if (!response.ok) {\n    //         setError(true)\n    //         throw new Error (`Something go wrong, status - ${response.status}`)\n    //     }\n\n    //     setLoading(false)\n\n    //     return response.json()\n    // }\n\n    const request = useCallback(async (url, method = 'GET', body = null, headers = { 'Content-type': 'application/json' } ) => {\n        setLoading(true)\n\n        try {\n            const response = await fetch(url, { method, headers, body })\n            if (!response.ok) {\n                throw new Error(`Something go wrong, status - ${response.status}`)\n            }\n            return response.json()\n        }\n        \n        catch (e) {\n            setError(e.message)\n            throw e\n        }\n\n        finally {\n            setLoading(false)\n        }\n    }, [])\n\n    const clearError = useCallback(() => setError(null), [])\n\n    return { request, loading, error, clearError }\n}\n\nexport default useRequest\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAE7C,MAAMC,UAAU,GAAG,MAAM;EAAA;EACrB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGJ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACK,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;;EAEA,MAAMO,OAAO,GAAGN,WAAW,CAAC,gBAAOO,GAAG,EAAqF;IAAA,IAAnFC,MAAM,uEAAG,KAAK;IAAA,IAAEC,IAAI,uEAAG,IAAI;IAAA,IAAEC,OAAO,uEAAG;MAAE,cAAc,EAAE;IAAmB,CAAC;IACjHP,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAI;MACA,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAE;QAAEC,MAAM;QAAEE,OAAO;QAAED;MAAK,CAAC,CAAC;MAC5D,IAAI,CAACE,QAAQ,CAACE,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAE,gCAA+BH,QAAQ,CAACI,MAAO,EAAC,CAAC;MACtE;MACA,OAAOJ,QAAQ,CAACK,IAAI,EAAE;IAC1B,CAAC,CAED,OAAOC,CAAC,EAAE;MACNZ,QAAQ,CAACY,CAAC,CAACC,OAAO,CAAC;MACnB,MAAMD,CAAC;IACX,CAAC,SAEO;MACJd,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMgB,UAAU,GAAGnB,WAAW,CAAC,MAAMK,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;EAExD,OAAO;IAAEC,OAAO;IAAEJ,OAAO;IAAEE,KAAK;IAAEe;EAAW,CAAC;AAClD,CAAC;AAAA,GA1CKlB,UAAU;AA4ChB,eAAeA,UAAU"},"metadata":{},"sourceType":"module"}